<div class="section-card" data-aos="fade-right">
  <div class="mb-8">
    <h3 class="text-3xl font-bold text-slate-800 mb-3 flex items-center">
      <i class="fas fa-plug text-yellow-500 mr-3"></i>
      Energy & Utilities
    </h3>
    <p class="text-lg text-slate-600">Track your daily energy consumption and utility usage.</p>
  </div>

  <!-- Electricity Usage -->
  <div class="mb-8">
    <h4 class="text-xl font-semibold text-slate-700 mb-4 flex items-center">
      <i class="fas fa-bolt text-yellow-500 mr-2"></i>
      Electricity Usage
    </h4>
    <div class="bg-yellow-50 rounded-xl p-6">
      <div class="mb-4">
        <label class="block text-sm font-medium text-slate-600 mb-3">Daily consumption (kWh)</label>
        <input type="range" min="0" max="50" value="0" class="slider w-full mb-3" 
               id="electricitySlider" oninput="updateElectricity(this.value)">
        <div class="flex justify-between items-center">
          <span class="text-sm text-slate-500">0 kWh</span>
          <div class="bg-white rounded-lg px-4 py-2 shadow-sm">
            <span class="text-2xl font-bold text-yellow-600" id="electricityValue">0</span>
            <span class="text-sm text-slate-500 ml-1">kWh</span>
          </div>
          <span class="text-sm text-slate-500">50 kWh</span>
        </div>
      </div>
      <div>
        <label class="block text-sm font-medium text-slate-600 mb-2">Manual Input</label>
        <input type="number" min="0" max="50" value="0" class="form-input w-32" 
               id="electricityInput" oninput="updateElectricityFromInput(this.value)">
      </div>
    </div>
  </div>

  <!-- Gas Usage -->
  <div class="mb-8">
    <h4 class="text-xl font-semibold text-slate-700 mb-4 flex items-center">
      <i class="fas fa-fire text-orange-500 mr-2"></i>
      Gas Usage
    </h4>
    <div class="bg-orange-50 rounded-xl p-4">
      <div class="flex items-center justify-between mb-3">
        <label class="font-medium text-slate-700">Used gas today</label>
        <label class="toggle-switch">
          <input type="checkbox" id="gasToggle" onchange="toggleGasUsage()">
          <span class="toggle-slider"></span>
        </label>
      </div>
      <div id="gasInputs" class="hidden">
        <input type="number" min="0" placeholder="Cubic meters" 
               class="form-input" id="gasUsage" oninput="updateEnergyCalculation()">
      </div>
    </div>
  </div>

  <!-- Heating/Cooling -->
  <div class="mb-8">
    <h4 class="text-xl font-semibold text-slate-700 mb-4 flex items-center">
      <i class="fas fa-thermometer-half text-blue-500 mr-2"></i>
      Heating/Cooling
    </h4>
    <div class="bg-blue-50 rounded-xl p-4">
      <div class="flex items-center justify-between mb-3">
        <label class="font-medium text-slate-700">Used heating/cooling today</label>
        <label class="toggle-switch">
          <input type="checkbox" id="heatingToggle" onchange="toggleHeatingUsage()">
          <span class="toggle-slider"></span>
        </label>
      </div>
      <div id="heatingInputs" class="hidden">
        <input type="number" min="0" placeholder="Hours of usage" 
               class="form-input" id="heatingHours" oninput="updateEnergyCalculation()">
      </div>
    </div>
  </div>

  <!-- AI Bill Upload -->
  <div class="mb-6">
    <h4 class="text-xl font-semibold text-slate-700 mb-4 flex items-center">
      <i class="fas fa-robot text-purple-500 mr-2"></i>
      Upload Energy Bill
    </h4>
    <div class="border-2 border-dashed border-purple-300 rounded-xl p-6 text-center bg-purple-50 hover:bg-purple-100 transition-colors cursor-pointer"
         onclick="document.getElementById('energyFileInput').click()">
      <i class="fas fa-file-invoice text-4xl text-purple-500 mb-3"></i>
      <h4 class="text-lg font-semibold text-slate-700 mb-2">Upload Energy Bills</h4>
      <p class="text-slate-500 mb-4">AI will extract usage data automatically</p>
      <div class="text-sm text-slate-400">Supports PDF, JPG, PNG files</div>
      <input type="file" id="energyFileInput" class="hidden" multiple 
             accept=".pdf,.jpg,.jpeg,.png" onchange="handleEnergyFiles(this.files)">
    </div>
  </div>
</div>

<script>
function updateElectricity(value) {
  document.getElementById('electricityValue').textContent = value;
  document.getElementById('electricityInput').value = value;
  const dayData = carbonTracker.getCurrentDateData();
  dayData.energy.electricity = parseFloat(value);
  updateEnergyCalculation();
}

function updateElectricityFromInput(value) {
  if (value >= 0 && value <= 50) {
    document.getElementById('electricitySlider').value = value;
    document.getElementById('electricityValue').textContent = value;
    const dayData = carbonTracker.getCurrentDateData();
    dayData.energy.electricity = parseFloat(value);
    updateEnergyCalculation();
  }
}

function toggleGasUsage() {
  const toggle = document.getElementById('gasToggle');
  const inputs = document.getElementById('gasInputs');
  
  if (toggle && inputs) {
    inputs.classList.toggle('hidden', !toggle.checked);
    if (!toggle.checked) {
      document.getElementById('gasUsage').value = '';
      const dayData = carbonTracker.getCurrentDateData();
      dayData.energy.gas = 0;
      updateEnergyCalculation();
    }
  }
}

function toggleHeatingUsage() {
  const toggle = document.getElementById('heatingToggle');
  const inputs = document.getElementById('heatingInputs');
  
  if (toggle && inputs) {
    inputs.classList.toggle('hidden', !toggle.checked);
    if (!toggle.checked) {
      document.getElementById('heatingHours').value = '';
      const dayData = carbonTracker.getCurrentDateData();
      dayData.energy.heating = 0;
      updateEnergyCalculation();
    }
  }
}

function updateEnergyCalculation() {
  const dayData = carbonTracker.getCurrentDateData();
  
  // Update gas usage
  const gasUsage = document.getElementById('gasUsage');
  if (gasUsage && document.getElementById('gasToggle').checked) {
    dayData.energy.gas = parseFloat(gasUsage.value) || 0;
  }
  
  // Update heating usage
  const heatingHours = document.getElementById('heatingHours');
  if (heatingHours && document.getElementById('heatingToggle').checked) {
    dayData.energy.heating = parseFloat(heatingHours.value) || 0;
  }
  
  // Recalculate emissions
  carbonTracker.calculateAllEmissions();
}

function handleEnergyFiles(files) {
  // Similar to other file handlers - simulate AI processing
  alert('Energy bill upload feature would process files here.');
}
</script>
